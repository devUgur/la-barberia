<template>
  <div id="curved-shop-name" v-if="show">
    <transition appear name="fade" @before-enter="beforeEnter" @enter="enter">
      <h1 ref="title" class="title ml2">{{ title }}</h1>
      <!--
      <svg
          width="653"
          height="71.6"
          viewBox="0 0 653 71.6"
          xmlns="http://www.w3.org/2000/svg"
      >
        <g
            id="svgGroup"
            stroke-linecap="round"
            fill-rule="evenodd"
            font-size="9pt"
            stroke="#000"
            stroke-width="0.25mm"
            fill="#000"
            style="stroke:#fdfdfd;
            stroke-width:0.25mm;
            fill:#ffffff">
          <path d="M 416.8 2.8 L 416.8 0.6 L 468.8 0.6 L 469.8 20.4 L 468 20.4 A 67.919 67.919 0 0 0 465.61 15.229 Q 462.508 9.247 459.2 6.55 A 14.803 14.803 0 0 0 454.453 4.02 Q 450.776 2.8 445.7 2.8 L 442.2 2.8 L 442.2 33.7 L 445.6 33.7 A 10.151 10.151 0 0 0 453.094 30.58 A 12.683 12.683 0 0 0 453.5 30.15 A 17.096 17.096 0 0 0 456.329 25.762 Q 457.216 23.819 457.796 21.48 A 30.604 30.604 0 0 0 458 20.6 L 459.5 20.6 L 459.5 50.2 L 457.8 50.2 A 43.088 43.088 0 0 0 456.689 46.321 Q 455.372 42.471 453.587 40.232 A 10.977 10.977 0 0 0 452.95 39.5 A 10.075 10.075 0 0 0 447.44 36.56 A 14.764 14.764 0 0 0 444.6 36.3 L 442.2 36.3 L 442.2 68.4 L 446 68.4 A 25.565 25.565 0 0 0 454.39 67.068 A 22.33 22.33 0 0 0 461.65 62.9 Q 468.1 57.4 470.5 48.8 L 472.5 48.8 L 471.7 70.6 L 416.8 70.6 L 416.8 68.4 L 422.7 68.4 L 422.7 2.8 L 416.8 2.8 Z M 310 35.2 L 304.7 35.2 L 304.7 68.7 L 311.2 68.7 L 311.2 70.6 L 278.7 70.6 L 278.7 68.7 L 285.2 68.7 L 285.2 2.5 L 278.7 2.5 L 278.7 0.6 L 308.9 0.6 Q 321.9 0.6 327.35 1.95 A 38.135 38.135 0 0 1 330.087 2.729 Q 332.657 3.575 334.195 4.595 A 7.954 7.954 0 0 1 335 5.2 Q 339.8 9.1 339.8 17.6 A 27.046 27.046 0 0 1 339.472 21.97 Q 338.627 27.119 335.6 29.75 Q 332.537 32.412 327.135 33.505 A 37.066 37.066 0 0 1 322.8 34.1 L 322.8 34.4 A 32.692 32.692 0 0 1 326.916 35.21 Q 331.788 36.526 334.1 39.2 Q 337.3 42.9 337.3 51.6 L 337.3 56.9 A 77.305 77.305 0 0 0 337.33 59.151 Q 337.429 62.522 337.85 63.9 Q 338.353 65.548 339.904 65.687 A 3.302 3.302 0 0 0 340.2 65.7 Q 342 65.7 343.05 64.05 A 6.191 6.191 0 0 0 343.55 63.037 Q 344.244 61.302 344.867 57.857 A 70.721 70.721 0 0 0 345 57.1 L 346.7 57.3 A 49.044 49.044 0 0 1 346.053 61.172 Q 345.269 64.865 344.04 67.047 A 8.32 8.32 0 0 1 342.85 68.7 Q 340.1 71.6 331.9 71.6 A 27.464 27.464 0 0 1 327.771 71.312 Q 325.66 70.99 323.994 70.308 A 10.031 10.031 0 0 1 320.25 67.75 A 10.194 10.194 0 0 1 318.431 64.685 Q 317.204 61.602 316.9 56.713 A 55.151 55.151 0 0 1 316.8 53.3 L 316.8 46 Q 316.8 40.4 315.35 37.8 A 4.78 4.78 0 0 0 312.32 35.487 Q 311.455 35.245 310.398 35.207 A 11.143 11.143 0 0 0 310 35.2 Z M 509.9 35.2 L 504.6 35.2 L 504.6 68.7 L 511.1 68.7 L 511.1 70.6 L 478.6 70.6 L 478.6 68.7 L 485.1 68.7 L 485.1 2.5 L 478.6 2.5 L 478.6 0.6 L 508.8 0.6 Q 521.8 0.6 527.25 1.95 A 38.135 38.135 0 0 1 529.987 2.729 Q 532.557 3.575 534.095 4.595 A 7.954 7.954 0 0 1 534.9 5.2 Q 539.7 9.1 539.7 17.6 A 27.046 27.046 0 0 1 539.372 21.97 Q 538.527 27.119 535.5 29.75 Q 532.437 32.412 527.035 33.505 A 37.066 37.066 0 0 1 522.7 34.1 L 522.7 34.4 A 32.692 32.692 0 0 1 526.816 35.21 Q 531.688 36.526 534 39.2 Q 537.2 42.9 537.2 51.6 L 537.2 56.9 A 77.305 77.305 0 0 0 537.23 59.151 Q 537.329 62.522 537.75 63.9 Q 538.253 65.548 539.804 65.687 A 3.302 3.302 0 0 0 540.1 65.7 Q 541.9 65.7 542.95 64.05 A 6.191 6.191 0 0 0 543.45 63.037 Q 544.144 61.302 544.767 57.857 A 70.721 70.721 0 0 0 544.9 57.1 L 546.6 57.3 A 49.044 49.044 0 0 1 545.953 61.172 Q 545.169 64.865 543.94 67.047 A 8.32 8.32 0 0 1 542.75 68.7 Q 540 71.6 531.8 71.6 A 27.464 27.464 0 0 1 527.671 71.312 Q 525.56 70.99 523.894 70.308 A 10.031 10.031 0 0 1 520.15 67.75 A 10.194 10.194 0 0 1 518.331 64.685 Q 517.104 61.602 516.8 56.713 A 55.151 55.151 0 0 1 516.7 53.3 L 516.7 46 Q 516.7 40.4 515.25 37.8 A 4.78 4.78 0 0 0 512.22 35.487 Q 511.355 35.245 510.298 35.207 A 11.143 11.143 0 0 0 509.9 35.2 Z M 0 2.8 L 0 0.6 L 36 0.6 L 36 2.8 L 25.4 2.8 L 25.4 68.4 L 29 68.4 A 22.497 22.497 0 0 0 34.89 67.669 A 16.462 16.462 0 0 0 42.55 63.2 Q 47.6 58 52.8 47.2 L 54.9 47.2 L 53 70.6 L 0 70.6 L 0 68.4 L 5.9 68.4 L 5.9 2.8 L 0 2.8 Z M 93.6 68.7 L 100.7 68.7 L 93.4 47.1 L 73.6 47.1 L 65.9 68.7 L 73.4 68.7 L 73.4 70.6 L 58.1 70.6 L 58.1 68.7 L 62.8 68.7 L 88.3 0 L 96.5 0 L 121.7 68.7 L 126.3 68.7 L 126.3 70.6 L 93.6 70.6 L 93.6 68.7 Z M 243.9 68.7 L 251 68.7 L 243.7 47.1 L 223.9 47.1 L 216.2 68.7 L 223.7 68.7 L 223.7 70.6 L 208.4 70.6 L 208.4 68.7 L 213.1 68.7 L 238.6 0 L 246.8 0 L 272 68.7 L 276.6 68.7 L 276.6 70.6 L 243.9 70.6 L 243.9 68.7 Z M 620.3 68.7 L 627.4 68.7 L 620.1 47.1 L 600.3 47.1 L 592.6 68.7 L 600.1 68.7 L 600.1 70.6 L 584.8 70.6 L 584.8 68.7 L 589.5 68.7 L 615 0 L 623.2 0 L 648.4 68.7 L 653 68.7 L 653 70.6 L 620.3 70.6 L 620.3 68.7 Z M 147 2.5 L 147 0.6 L 176.9 0.6 A 82.935 82.935 0 0 1 184.169 0.897 Q 192.755 1.655 197.75 4.35 A 12.476 12.476 0 0 1 204.355 13.292 A 18.938 18.938 0 0 1 204.7 17 Q 204.7 29.946 189.966 33.069 A 38.489 38.489 0 0 1 188.2 33.4 L 188.2 33.6 A 40.843 40.843 0 0 1 195.871 35.247 Q 208.2 39.301 208.2 51 A 22.452 22.452 0 0 1 207.477 56.895 A 14.471 14.471 0 0 1 200 66.25 A 30.814 30.814 0 0 1 193.512 68.727 Q 186.958 70.479 177.69 70.592 A 105.841 105.841 0 0 1 176.4 70.6 L 147 70.6 L 147 68.7 L 153.5 68.7 L 153.5 2.5 L 147 2.5 Z M 350.9 2.5 L 350.9 0.6 L 380.8 0.6 A 82.935 82.935 0 0 1 388.069 0.897 Q 396.655 1.655 401.65 4.35 A 12.476 12.476 0 0 1 408.255 13.292 A 18.938 18.938 0 0 1 408.6 17 Q 408.6 29.946 393.866 33.069 A 38.489 38.489 0 0 1 392.1 33.4 L 392.1 33.6 A 40.843 40.843 0 0 1 399.771 35.247 Q 412.1 39.301 412.1 51 A 22.452 22.452 0 0 1 411.377 56.895 A 14.471 14.471 0 0 1 403.9 66.25 A 30.814 30.814 0 0 1 397.412 68.727 Q 390.858 70.479 381.59 70.592 A 105.841 105.841 0 0 1 380.3 70.6 L 350.9 70.6 L 350.9 68.7 L 357.4 68.7 L 357.4 2.5 L 350.9 2.5 Z M 551.2 2.5 L 551.2 0.6 L 581.7 0.6 L 581.7 2.5 L 576.2 2.5 L 576.2 68.7 L 581.7 68.7 L 581.7 70.6 L 551.2 70.6 L 551.2 68.7 L 556.7 68.7 L 556.7 2.5 L 551.2 2.5 Z M 175.3 35.2 L 173 35.2 L 173 68.7 L 177.7 68.7 A 12.369 12.369 0 0 0 180.604 68.382 A 7.246 7.246 0 0 0 185.4 64.9 A 13.437 13.437 0 0 0 186.653 61.862 Q 187.521 58.831 187.593 54.496 A 47.832 47.832 0 0 0 187.6 53.7 L 187.6 48.4 A 25.763 25.763 0 0 0 187.362 44.772 Q 186.798 40.82 184.9 38.5 A 7.783 7.783 0 0 0 181.804 36.273 Q 179.313 35.232 175.537 35.201 A 28.406 28.406 0 0 0 175.3 35.2 Z M 379.2 35.2 L 376.9 35.2 L 376.9 68.7 L 381.6 68.7 A 12.369 12.369 0 0 0 384.504 68.382 A 7.246 7.246 0 0 0 389.3 64.9 A 13.437 13.437 0 0 0 390.553 61.862 Q 391.421 58.831 391.493 54.496 A 47.832 47.832 0 0 0 391.5 53.7 L 391.5 48.4 A 25.763 25.763 0 0 0 391.262 44.772 Q 390.698 40.82 388.8 38.5 A 7.783 7.783 0 0 0 385.704 36.273 Q 383.213 35.232 379.437 35.201 A 28.406 28.406 0 0 0 379.2 35.2 Z M 308 2.5 L 304.7 2.5 L 304.7 33.3 L 307.9 33.3 A 14.677 14.677 0 0 0 311.174 32.958 Q 313.356 32.459 314.922 31.23 A 8.422 8.422 0 0 0 316.35 29.8 A 10.4 10.4 0 0 0 317.916 26.874 Q 318.933 24.047 319.077 19.821 A 41.992 41.992 0 0 0 319.1 18.4 L 319.1 15.5 A 36.809 36.809 0 0 0 318.954 12.091 Q 318.642 8.751 317.661 6.763 A 6.08 6.08 0 0 0 316.45 5.05 A 7.948 7.948 0 0 0 313.669 3.358 Q 311.364 2.5 308 2.5 Z M 507.9 2.5 L 504.6 2.5 L 504.6 33.3 L 507.8 33.3 A 14.677 14.677 0 0 0 511.074 32.958 Q 513.256 32.459 514.822 31.23 A 8.422 8.422 0 0 0 516.25 29.8 A 10.4 10.4 0 0 0 517.816 26.874 Q 518.833 24.047 518.977 19.821 A 41.992 41.992 0 0 0 519 18.4 L 519 15.5 A 36.809 36.809 0 0 0 518.854 12.091 Q 518.542 8.751 517.561 6.763 A 6.08 6.08 0 0 0 516.35 5.05 A 7.948 7.948 0 0 0 513.569 3.358 Q 511.264 2.5 507.9 2.5 Z M 176.2 2.5 L 173 2.5 L 173 33.3 L 175.6 33.3 Q 178.833 33.3 180.848 32.082 A 6.152 6.152 0 0 0 182.85 30.15 A 10.328 10.328 0 0 0 184.017 27.589 Q 184.811 25.049 184.891 21.342 A 39.161 39.161 0 0 0 184.9 20.5 L 184.9 15.8 Q 184.9 10.05 183.813 6.987 A 8.237 8.237 0 0 0 183.1 5.45 A 5.578 5.578 0 0 0 180.256 3.148 Q 179.241 2.753 177.957 2.599 A 14.752 14.752 0 0 0 176.2 2.5 Z M 380.1 2.5 L 376.9 2.5 L 376.9 33.3 L 379.5 33.3 Q 382.733 33.3 384.748 32.082 A 6.152 6.152 0 0 0 386.75 30.15 A 10.328 10.328 0 0 0 387.917 27.589 Q 388.711 25.049 388.791 21.342 A 39.161 39.161 0 0 0 388.8 20.5 L 388.8 15.8 Q 388.8 10.05 387.713 6.987 A 8.237 8.237 0 0 0 387 5.45 A 5.578 5.578 0 0 0 384.156 3.148 Q 383.141 2.753 381.857 2.599 A 14.752 14.752 0 0 0 380.1 2.5 Z M 92.6 44.9 L 83.9 18.7 L 74.5 44.9 L 92.6 44.9 Z M 242.9 44.9 L 234.2 18.7 L 224.8 44.9 L 242.9 44.9 Z M 619.3 44.9 L 610.6 18.7 L 601.2 44.9 L 619.3 44.9 Z" vector-effect="non-scaling-stroke"/></g></svg>
     -->
    </transition>

    <h2 class="subtitle">{{ subtitle }}</h2>

    <!--
    <transition appear name="fade" @before-enter="beforeEnter" @enter="enter">
      <div id="demo-text">This Is A Sample Text</div>
    </transition>
    -->

  </div>
</template>

<script>
import gsap from 'gsap'
import CircleType from "circletype";
import anime from 'animejs'

export default {
  name: "CurvedShopName",
  props: [ 'textSize' ],
  data(){
    return {
      show: true,
      title: 'LA BARBERIA',
      subtitle: 'DORTMUND'
    }
  },
  mounted() {
    this.curveText();
    this.animateSubtitle();
  },
  methods: {
    curveText(){
      let htmlTitle = document.querySelector('#curved-shop-name .title');
      let circleType = new CircleType(htmlTitle);
      circleType.radius(390);
    },
    animateTitle(){

    },
    animateSubtitle(){
      var textWrapper = document.querySelector('.subtitle');
      textWrapper.innerHTML = textWrapper.textContent.replace(/\S/g, "<span class='letter'>$&</span>");
      console.log("check ich nicht")

      setTimeout( () => {
        //this.subtitle = "BEST CUTS";
      },3000)
      anime.timeline({loop: true})
          .add({
            targets: '.subtitle .letter',
            translateX: [40,0],
            translateZ: 0,
            opacity: [0,1],
            easing: "easeOutExpo",
            duration: 3200,
            delay: (el, i) => 500 + 30 * i
          })
    },
    beforeEnter(el){
      console.log('before enter - set initial state');
      el.style.transform = 'translateY(-100px)';
      el.style.opacity = 0;
    },
    enter(el) {
      console.log('starting to enter - make transition');
      gsap.to(el, {
        duration: 2,
        y: 0,
        opacity: 1,
      })
    }
  }
}
</script>

<!-- STYLE -->
<style scoped>
#curved-shop-name{
  resize: both;
}

svg{
  width: 100%;
  /*min-width: 200px;*/
}

path{
  stroke-dasharray: 20;
  stroke-dashoffset: 50;
  animation: dash 5s linear alternate infinite;
}

g path {
  transform: translateY(2px);
}

@keyframes dash {
  from {
    stroke-dashoffset: 1;
  }
  to {
    stroke-dashoffset: 0;
  }
}

h1{
  margin: 0px;
  padding: 0px;


}
.title{
  font-size: 5.5rem;
  font-family: var(--abril-font-family);
  letter-spacing: 10px;
}
.subtitle{
  margin-top: -80px;
  margin-bottom: 40px;
  font-family: var(--abril-font-family);
}

</style>